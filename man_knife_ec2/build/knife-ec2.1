.TH "KNIFE-EC2" "1" "December 20, 2012" "0.0.1" "knife-ec2"
.SH NAME
knife-ec2 \- Man page for knife-ec2.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructuredText.
.
.sp
Amazon EC2 is a web service that provides resizable compute capacity in the cloud, based on pre\-configured operating systems and virtual application software using Amazon Machine Images (AMI). The \fBec2\fP sub\-command is used to manage API\-driven cloud servers that are hosted by Amazon EC2.
.sp
This plugin should be installed using RubyGems.
.IP Note
This plugin requires the \fBknife windows\fP plugin to be present on the same machine.
.RE
.sp
This sub\-command has the following syntax:
.sp
.nf
.ft C
knife ec2 [ARGUMENT] (options)
.ft P
.fi
.SH COMMON OPTIONS
.sp
The following options can be run with all Knife sub\-commands and plug\-ins:
.INDENT 0.0
.TP
.B \fB\-c CONFIG\fP, \fB\-\-config CONFIG\fP
The configuration file to use.
.TP
.B \fB\-\-color\fP
Indicates that colored output will be used.
.TP
.B \fB\-d\fP, \fB\-\-disable\-editing\fP
Indicates that $EDITOR will not be opened; data will be accepted as\-is.
.TP
.B \fB\-\-defaults\fP
Indicates that Knife will use the default value, instead of asking a user to provide one.
.TP
.B \fB\-e EDITOR\fP, \fB\-\-editor EDITOR\fP
The $EDITOR that is used for all interactive commands.
.TP
.B \fB\-E ENVIRONMENT\fP, \fB\-\-environment ENVIRONMENT\fP
The name of the Chef server environment. When this option is added to a command, the command will run only against the named environment.
.TP
.B \fB\-F FORMAT\fP, \fB\-\-format FORMAT\fP
The output format: \fBsummary\fP (default), \fBtext\fP, \fBjson\fP, \fByaml\fP, and \fBpp\fP.
.TP
.B \fB\-h\fP, \fB\-\-help\fP
Shows help for Knife or for a sub\-command.
.TP
.B \fB\-k KEY\fP, \fB\-\-key KEY\fP
The private key that Knife will use to sign requests made by the API client to the Chef server.
.TP
.B \fB\-\-no\-color\fP
Indicates that color will not be used in the output.
.TP
.B \fB\-\-print\-after\fP
Indicates that data will be shown after a destructive operation.
.TP
.B \fB\-\-repo\-mode MODE\fP
The layout of the local repository. The \fBdefault\fP repository includes cookbooks, data bags, environments, and roles. The \fBeverything\fP repository adds nodes, API client, and users. Default value: \fBdefault\fP.
.TP
.B \fB\-s URL\fP, \fB\-\-server\-url URL\fP
The URL for the Chef server.
.TP
.B \fB\-u USER\fP, \fB\-\-user USER\fP
A user name that Knife will use to sign requests made by the API client to the Chef server. If this option is used, be sure to ensure that the user name matches the private key or authentication will fail.
.TP
.B \fB\-v\fP, \fB\-\-version\fP
Shows the version of Chef.
.TP
.B \fB\-V\fP, \fB\-\-verbose\fP
Set for more verbose outputs. Use \fB\-VV\fP for maximum verbosity.
.TP
.B \fB\-y\fP, \fB\-\-yes\fP
Indicates that "yes" will be the response to all confirmation prompts (and that Knife will not ask a user for confirmation).
.UNINDENT
.SH INSTANCE DATA
.sp
The \fBinstance data\fP argument is used to generate instance metadata used with custom Opscode Amazon Machine Images (AMI). This process will read the validation certificate and Chef server URL from the Knife configuration file (~/.chef/knife.rb) and will output the data in JSON format.
.IP Warning
Using this sub\-command is an older way of launching Amazon EC2 instances for Chef and should be considered deprecated. Using the \fBserver create\fP sub\-command is preferred (and more flexible). Although this sub\-command will remain, the Opscode custom Amazon Machine Images (AMI) are out of date.
.RE
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 instance data (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-e\fP, \fB\-\-edit\fP
Indicates that instance data should be edited using the default text editor.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.UNINDENT
.SH SERVER CREATE
.sp
The \fBserver create\fP argument is used to create a new Amazon EC2 cloud instance. This will provision a new image in Amazon EC2, perform a Chef bootstrap (using the SSH protocol), and then install Chef on the target system so that it can be run as a chef\-client and communicate with a Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server create (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-bootstrap\-protocol PROTOCOL\fP
The protocol used to bootstrap on a machine that is running Windows Server: \fBwinrm\fP or \fBssh\fP.
.TP
.B \fB\-\-bootstrap\-version VERSION\fP
The version of Chef to install.
.TP
.B \fB\-d DISTRO\fP, \fB\-\-distro DISTRO\fP
The template file to be used during a bootstrap operation. Use this option if the specific location of the template file is unknown. The following distributions are supported: \fBchef\-full\fP (the default bootstrap), \fBcentos5\-gems\fP, \fBfedora13\-gems\fP, \fBubuntu10.04\-gems\fP, \fBubuntu10.04\-apt\fP, and \fBubuntu12.04\-gems\fP. If this option is used, Knife will search for the template file in the following order: a \fBbootstrap/\fP folder in the current working directory, a \fBbootstrap/\fP folder in the Chef repository, a \fBbootstrap/\fP folder in \fB~/.chef/\fP, or a bootstrap file shipped with Chef. Do not use the \fB\-\-template\-file\fP option when \fB\-\-distro\fP is specified.
.TP
.B \fB\-\-ebs\-size SIZE\fP
The size of the Amazon Elastic Block Store volume, in GB. This option is only available for instances that are backed with Amazon Elastic Block Store.
.TP
.B \fB\-\-ebs\-no\-delete\-on\-term\fP
Indicates that the Amazon Elastic Block Store volume will not be deleted upon instance termination. This option is only available for instances that are backed with Amazon Elastic Block Store.
.TP
.B \fB\-ephemeral DEVICE\fP
A comma\-separated list of device locations to be mapped to ephemeral devices.
.TP
.B \fB\-f FLAVOR\fP, \fB\-\-flavor FLAVOR\fP
The name of the flavor that identifies the hardware configuration of the server, including disk space, memory capacity, and CPU priority.
.TP
.B \fB\-fqdn FQDN\fP
A pre\-defined FQDN.
.TP
.B \fB\-g X,Y,Z\fP, \fB\-\-security\-group\-ids X,Y,Z\fP
A comma\-separated list of security group identifiers. Required when using Amazon Virtual Private Cloud.
.TP
.B \fB\-G X,Y,Z\fP, \fB\-\-groups X,Y,Z\fP
A comma\-separated list of security groups. Not supported when using Amazon Virtual Private Cloud.
.TP
.B \fB\-hint HINT_NAME[=HINT_FILE]\fP
Indicates that an Ohai hint will be set on the target of the bootstrap. Use multiple \fB\-\-hint\fP options to specify multiple hints.
.TP
.B \fB\-i IDENTITY_FILE\fP, \fB\-\-identity\-file IDENTITY_FILE\fP
The SSH identity file used for authentication. Key\-based authentication is recommended.
.TP
.B \fB\-I IMAGE\fP, \fB\-\-image IMAGE\fP
The name of the image that identifies the operating system (and version) that will be used to create the virtual machine.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-N NAME\fP, \fB\-\-node\-name NAME\fP
The name of the node.
.TP
.B \fB\-\-[no\-]host\-key\-verify\fP
Use \fB\-\-no\-host\-key\-verify\fP to disable host key verification. Default setting: \fB\-\-host\-key\-verify\fP.
.TP
.B \fB\-p PORT\fP, \fB\-\-ssh\-port PORT\fP
The SSH port.
.TP
.B \fB\-P PASSWORD\fP, \fB\-\-ssh\-password PASSWORD\fP
The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) Knife will prompt for the password.
.TP
.B \fB\-\-prerelease\fP
Indicates that pre\-release Chef gems should be installed.
.TP
.B \fB\-r RUN_LIST\fP, \fB\-\-run\-list RUN_LIST\fP
A comma\-separated list of roles and/or recipes to be applied.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.TP
.B \fB\-s SUBNET_ID\fP, \fB\-\-subnet SUBNET_ID\fP
The Amazon Virtual Private Cloud instance in which a node will be created.
.TP
.B \fB\-S KEY\fP, \fB\-\-ssh\-key KEY\fP
The SSH key for the Amazon EC2 environment.
.TP
.B \fB\-server\-connect\-attribute ATTRIBUTE\fP
The attribute that is used when opening the SSH connection. This should be an Amazon EC2 server attribute.
.TP
.B \fB\-\-T Tag=Value[,Tag=Value]\fP, \fB\-\-tags Tag=Value[,Tag=Value]\fP
The tags for this server.
.TP
.B \fB\-\-template\-file TEMPLATE\fP
The path to a template file that will be used during a bootstrap operation. Do not use the \fB\-\-distro\fP option when \fB\-\-template\-file\fP is specified.
.TP
.B \fB\-u USER_DATA_FILE\fP, \fB\-\-user\-data USER_DATA_FILE\fP
The Amazon EC2 user data file used during instance provisioning.
.TP
.B \fB\-w GATEWAY\fP, \fB\-\-ssh\-gateway GATEWAY\fP
The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.
.TP
.B \fB\-x USERNAME\fP, \fB\-\-ssh\-user USERNAME\fP
The SSH user name.
.TP
.B \fB\-Z ZONE"\fP, \fB\-\-availability\-zone ZONE\fP
The name of the Amazon EC2 availability zone. Each availability zone is unique within a region. Default: \fBus\-east\-1b\fP.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to launch a new Amazon EC2 instance with the "webserver" role, enter:
.sp
.nf
.ft C
$ knife ec2 server create \-r "role[webserver]" \-I ami\-2d4aa444 \-\-flavor m1.small \-G www,default \-x ubuntu \-N server01
.ft P
.fi
.sp
To launch a new Amazon EC2 instance with multiple roles, enter:
.sp
.nf
.ft C
$ knife ec2 server create \-r "role[base],role[webserver]" \-I ami\-2d4aa444 \-G www,default \-x ubuntu \-\-node\-name server01
.ft P
.fi
.SH SERVER DELETE
.sp
The \fBserver delete\fP argument is used to delete one or more nodes that are running in the Amazon EC2 cloud. To find a specific cloud instance, use the \fBknife ec2 server list\fP argument. Use the \fB\-\-purge\fP option to delete all associated node and client objects from the Chef server or use the \fBknife node delete\fP and \fBknife client delete\fP sub\-commands to delete specific node and client objects.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server delete SERVER [NODE_NAME...] (options)
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-K SECRET\fP, \fB\-\-aws\-secret\-access\-key SECRET\fP
The secret access key for the API endpoint used with Amazon EC2.
.TP
.B \fB\-N NODE_NAME\fP, \fB\-\-node\-name NODE_NAME\fP
The name of the node to be deleted, if different from the server name. This must be used with the \fB\-\-purge\fP option.
.TP
.B \fB\-p\fP, \fB\-\-purge\fP
Indicates that all corresponding nodes and clients on the Chef server will be destroyed, in addition to the Amazon EC2 node itself. This action (by itself) assumes that the node and client have the same name as the server; if they do not have the same names, then the \fB\-\-node\-name\fP option must be used to specify the name of the node.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.UNINDENT
.sp
\fBExamples\fP
.sp
For example, to delete a node called "preprod" in an instance named "operations", enter:
.sp
.nf
.ft C
$ knife ec2 server delete operations preprod
.ft P
.fi
.SH SERVER LIST
.sp
The \fBserver list\fP argument is used to find instances that are associated with a Amazon EC2 account. The results may show instances that are not currently managed by the Chef server.
.sp
This argument has the following syntax:
.sp
.nf
.ft C
knife ec2 server list
.ft P
.fi
.sp
This argument has the following options:
.INDENT 0.0
.TP
.B \fB\-A KEY\fP, \fB\-\-aws\-access\-key\-id KEY\fP
The access key identifier used with Amazon EC2.
.TP
.B \fB\-n\fP, \fB\-\-no\-name\fP
Indicates that tag names will not be displayed in the output.
.TP
.B \fB\-\-region REGION\fP
The name of the region from which instances of hosted applications are launched. Each region has a unique endpoint.
.TP
.B \fB\-t TAG1, TAG2\fP, \fB\-\-tags TAG1, TAG2\fP
A list of tags that will be displayed in the output.
.UNINDENT
.SH AUTHOR
Opscode
.SH COPYRIGHT
2012, Opscode, Inc
.\" Generated by docutils manpage writer.
.
