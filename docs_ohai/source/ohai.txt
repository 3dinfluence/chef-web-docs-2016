
Ohai
****

Ohai is a tool that is used to detect certain properties about a
node's environment and provide them to the chef-client during every
Chef run. The types of properties Ohai reports on include:

* Platform details

* Networking usage

* Memory usage

* Processor usage

* Kernel data

* Host names

* Fully qualified domain names

* and other configuration details

Later, while Chef configures the node object during each Chef run,
these attributes are used by the chef-client to ensure that certain
properties remain unchanged. (These properties are also referred to as
"automatic" attributes.) Ohai is part of the required configuration on
each node that is registered with the Chef server.


Automatic Attributes
====================

An automatic attribute is a specific detail about a node, such as an
IP address, a host name, a list of loaded kernel modules, the
version(s) of available programming languages that are available, and
so on. Automatic attributes are detected by Ohai and are then used by
Chef to ensure that these attribute are handled properly during every
Chef run. The most commonly accessed automatic attributes are:

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Attribute                                                    | Description                                                                                                                                                                                                                                                                                                                                                                                                                          |
+==============================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================+
| "node['platform']"                                           | The platform on which a node is running. This attribute helps determine which providers will be used.                                                                                                                                                                                                                                                                                                                                |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['platform_version']"                                   | The version of the platform. This attribute helps determine which providers will be used.                                                                                                                                                                                                                                                                                                                                            |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['ipaddress']"                                          | The IP address for a node. If the node has a default route, this is the IPV4 address for the interface. If the node does not have a default route, the value for this attribute should be "nil". The IP address for default route is the recommended default value.                                                                                                                                                                  |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['macaddress']"                                         | The MAC address for a node, determined by the same interface that detects the "node['ipaddress']".                                                                                                                                                                                                                                                                                                                                   |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['fqdn']"                                               | The fully qualified domain name for a node. This is used as the name of a node unless otherwise set.                                                                                                                                                                                                                                                                                                                                 |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['hostname']"                                           | The host name for the node.                                                                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['domain']"                                             | The domain for the node.                                                                                                                                                                                                                                                                                                                                                                                                             |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['recipes']"                                            | A list of recipes associated with a node (and part of that node's run- list).                                                                                                                                                                                                                                                                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['roles']"                                              | A list of roles associated with a node (and part of that node's run- list).                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| "node['ohai_time']"                                          | The time at which Ohai was last run. This attribute is not commonly used in recipes, but it is saved to the Chef server and can be accessed using the "knife status" sub-command.                                                                                                                                                                                                                                                    |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


Ohai Attribute List
===================

The following attributes are those which are re-written with each Ohai
run, so they should be recognized as being unmodifiable when
considering the use of attributes:

   ohai$ grep -R "provides" -h lib/ohai/plugins|sed 's/^\s*//g'|sed "s/\\\"/\'/g"|sort|uniq|grep ^provides
