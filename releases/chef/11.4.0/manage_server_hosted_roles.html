

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Manage Roles in Hosted Chef &mdash; Chef Docs</title>
    
    <link rel="stylesheet" href="_static/opscode.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/opscode.ico"/>
    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="up" title="Manage the Hosted Chef Server" href="manage_server_hosted.html" />
    <link rel="next" title="Using Search in Hosted Chef" href="manage_server_hosted_search.html" />
    <link rel="prev" title="Manage Permissions in Hosted Chef" href="manage_server_hosted_permissions.html" /> 
  </head>
  <body>
<div style="background-color: #212c35; text-align: left; padding: 0px 0px 0px 0px">
<a href="http://docs.opscode.com/"><img src="_static/opscode_html_logo.png" border="0" alt="Opscode"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="manage_server_hosted_search.html" title="Using Search in Hosted Chef"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="manage_server_hosted_permissions.html" title="Manage Permissions in Hosted Chef"
             accesskey="P">previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="manage_server_hosted.html" accesskey="U">Manage the Hosted Chef Server</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/opscode_chef_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Manage Roles in Hosted Chef</a><ul>
<li><a class="reference internal" href="#create">Create</a></li>
<li><a class="reference internal" href="#delete">Delete</a></li>
<li><a class="reference internal" href="#edit">Edit</a></li>
<li><a class="reference internal" href="#edit-attributes">Edit Attributes</a><ul>
<li><a class="reference internal" href="#editor-tab">Editor Tab</a></li>
<li><a class="reference internal" href="#source-tab">Source Tab</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list">List</a></li>
<li><a class="reference internal" href="#show">Show</a></li>
</ul>
</li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="manage-roles-in-hosted-chef">
<h1>Manage Roles in Hosted Chef<a class="headerlink" href="#manage-roles-in-hosted-chef" title="Permalink to this headline">¶</a></h1>
<p>A role is a way to define certain patterns and processes that exist across nodes in a Chef organization as belonging to a single job function. Each role consists of zero (or more) attributes and a run list. Each node can have zero (or more) roles assigned to it. When a role is run against a node, the configuration details of that node are compared against the attributes of the role, and then the contents of that role&#8217;s run list are applied to the node&#8217;s configuration details. When a chef-client runs, it merges its own attributes and run lists with those contained within each assigned role.</p>
<p>The <strong>Management Console</strong> allows users to create, read, update, and delete roles.</p>
<div class="section" id="create">
<h2>Create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need create permissions on the global roles level to create new roles.</p>
</div>
<p>The role create page allows you to create a role. You can add recipes and roles to the run list. There is also a JSON editor for editing, adding and removing JSON attributes associated with the role.</p>
<p>To add a role:</p>
<ol class="arabic simple">
<li>Login to the <strong>Management Console</strong> and navigate to the Roles tab.</li>
<li>Make sure that the correct environment is selected at the top of the screen, select None if you want this role to work the same on all environments. Click <strong>Create</strong> on the sub navigation bar.</li>
<li>Give the role a name and an optional description.</li>
<li>Continue onto editing the role, by adding to it&#8217;s run-list and editing the attributes. This is described further in the next section.</li>
<li>When you have finished editing the role, click <strong>Create Role</strong> to save the new role.</li>
</ol>
<p>If you selected a custom environment and need the run list setup differently with another environment, you can now change the environment and edit the run list. If an environment is selected from the drop down at the top of the page, you will only see the run_list and attributes specific to this environment. You can see the default run list and attributes by selecting <tt class="docutils literal"><span class="pre">None</span></tt> or <tt class="docutils literal"><span class="pre">_default</span></tt> from the drop-down.</p>
</div>
<div class="section" id="delete">
<h2>Delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need delete permissions on the role to delete it. If you don&#8217;t have delete permissions, you may not see a <strong>Delete</strong> link or tab.</p>
</div>
<p>To delete a role:</p>
<ol class="arabic simple">
<li>Login to the <strong>Management Console</strong> and navigate to the Roles tab.</li>
<li>Click the <strong>Delete</strong> link next to the name of the role you want to delete, and click <strong>OK</strong> on the confirmation message box. Or, click the role to view its details, and click <strong>Delete</strong> on the sub navigation menu.</li>
</ol>
</div>
<div class="section" id="edit">
<h2>Edit<a class="headerlink" href="#edit" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need update permissions on the role to edit it.</p>
</div>
<p>To edit a role:</p>
<ol class="arabic">
<li><p class="first">Login to the <strong>Management Console</strong> and navigate to the <strong>Roles</strong> tab.</p>
</li>
<li><p class="first">Make sure that the correct environment is selected at the top of the screen, select <strong>None</strong> if you want this role to work the same on all environments. Click on edit next to the role you want to edit.</p>
</li>
<li><p class="first">To add a role or recipe to the role being edited, drag it from <strong>Available Roles</strong> or <strong>Available Recipes</strong> to <strong>Run List</strong>:</p>
<img alt="_images/step_manage_server_hosted_role_edit_1.png" src="_images/step_manage_server_hosted_role_edit_1.png" />
</li>
<li><p class="first">To remove a role or recipe from the role being edited, drag it from the <strong>Run List</strong> back to an <strong>Available</strong> section:</p>
<img alt="_images/step_manage_server_hosted_role_edit_2.png" src="_images/step_manage_server_hosted_role_edit_2.png" />
<p>The <strong>Active Run List</strong> panel on the right shows the current active run list for the environment selected with the drop down box at the top of the page. If the <tt class="docutils literal"><span class="pre">None</span></tt> or <tt class="docutils literal"><span class="pre">_default</span></tt> environments are selected it shows the default run list. If you&#8217;ve selected an environment that does not have a specific run list yet it will also show the default run list. If you edit the run list while an environment is selected at the top of the page, your changes will be saved as a run list specific for nodes in that environment.</p>
</li>
<li><p class="first">Click <strong>Save Role</strong> to save.</p>
</li>
</ol>
</div>
<div class="section" id="edit-attributes">
<h2>Edit Attributes<a class="headerlink" href="#edit-attributes" title="Permalink to this headline">¶</a></h2>
<p>You can edit the override Attributes of a role, to override the values of an included recipe or role, and you can edit the default attributes of a role to specify attributes that do not exist in included recipes and roles. You can use the Editor or Source tabs on this page to edit the attributes. With the Editor tab you can edit the attributes by selecting the location on the tree and adding the details. You can use the Source tab to paste in JSON directly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need update permissions on the role to edit the attributes.</p>
</div>
<div class="section" id="editor-tab">
<h3>Editor Tab<a class="headerlink" href="#editor-tab" title="Permalink to this headline">¶</a></h3>
<p>To edit role JSON data:</p>
<ol class="arabic">
<li><p class="first">Click on the plus sign next to &#8220;json&#8221; and select &#8220;default&#8221; or &#8220;override&#8221; from the tree on the left, depending on the type of attribute you want to create. If you&#8217;re unsure, you should select &#8220;default&#8221; unless you are trying to override a default attribute that is already set in the node or in a recipe.</p>
</li>
<li><p class="first">Click on the <strong>Editor</strong> tab on the right.</p>
</li>
<li><p class="first">Push the green add button under the <strong>Editor</strong> tab:</p>
</li>
<li><p class="first">Select a type of attribute from the drop down box. If you are unsure, you most likely want &#8220;string&#8221; if the value is text, or &#8220;number&#8221; if the value is a number.</p>
</li>
<li><p class="first">Enter a name as the key and a body as the value and click <strong>Add Attribute</strong>. The following figure shows the <strong>Default and Override Attributes</strong> tree and the JSON editor.</p>
<img alt="_images/step_manage_server_hosted_role_edit_editor.png" src="_images/step_manage_server_hosted_role_edit_editor.png" />
</li>
<li><p class="first">Click the <strong>Create Role or Save Role</strong> button to save the role.</p>
</li>
</ol>
</div>
<div class="section" id="source-tab">
<h3>Source Tab<a class="headerlink" href="#source-tab" title="Permalink to this headline">¶</a></h3>
<p>To edit role attribute data using the source JSON data:</p>
<ol class="arabic">
<li><p class="first">Enter the JSON body in the editor, and click the <strong>Load JSON from source</strong> button:</p>
<img alt="_images/step_manage_server_hosted_role_edit_source.png" src="_images/step_manage_server_hosted_role_edit_source.png" />
</li>
<li><p class="first">Click the <strong>Create Role or Save Role</strong> button to save the role.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="list">
<h2>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need list permissions on the global roles level to see the list of roles.</p>
</div>
<p>To list roles in your organization:</p>
<ol class="arabic">
<li><p class="first">Log on to the <strong>Management Console</strong> and select an organization to use if you are associated with multiple organizations.</p>
</li>
<li><p class="first">Click <strong>Roles</strong> on the main navigation menu.</p>
<img alt="_images/step_manage_server_hosted_role_list.png" src="_images/step_manage_server_hosted_role_list.png" />
</li>
</ol>
</div>
<div class="section" id="show">
<h2>Show<a class="headerlink" href="#show" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need read permissions on the role to view it.</p>
</div>
<p>Viewing a role shows the recipes and roles included in the role, as well as a tree view of the attributes associated with the role.</p>
<p>To view a specific role:</p>
<ol class="arabic">
<li><p class="first">Log on to the <strong>Management Console</strong> and select an organization to use if you are associated with multiple organizations.</p>
</li>
<li><p class="first">Click <strong>Roles</strong> on the main navigation menu.</p>
</li>
<li><p class="first">Click on the name of the specific role you want to view. This will bring you to a page where you can see the run_list and attributes for the role:</p>
<img alt="_images/step_manage_server_hosted_role_view.png" src="_images/step_manage_server_hosted_role_view.png" />
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="manage_server_hosted_search.html" title="Using Search in Hosted Chef"
             >next</a></li>
        <li class="right" >
          <a href="manage_server_hosted_permissions.html" title="Manage Permissions in Hosted Chef"
             >previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="manage_server_hosted.html" >Manage the Hosted Chef Server</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
    This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>


    <div class="footer">
        &copy; Copyright This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_setAccount', 'UA-6369228-7']);
_gaq.push(['_setDomainName', '.opscode.com']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_addIgnoredRef','opscode.com']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Async HubSpot Analytics Code -->
<script type="text/javascript">
(function(d,s,i,r) {
            if (d.getElementById(i)){return;}
            var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
            n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/57718.js';
            e.parentNode.insertBefore(n, e);
        })(document,"script","hs-analytics",300000);
    </script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Contact Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Contact Analytics Code -->


  </body>
</html>