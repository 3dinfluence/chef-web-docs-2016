

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>About the Repository &mdash; Chef Docs</title>
    
    <link rel="stylesheet" href="_static/opscode.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/opscode.ico"/>
    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="Directory Structure" href="essentials_repository_structure.html" />
    <link rel="prev" title="About Exception and Report Handlers" href="essentials_handlers.html" /> 
  </head>
  <body>
<div style="background-color: #212c35; text-align: left; padding: 0px 0px 0px 0px">
<a href="http://docs.opscode.com/"><img src="_static/opscode_html_logo.png" border="0" alt="Opscode"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="essentials_repository_structure.html" title="Directory Structure"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="essentials_handlers.html" title="About Exception and Report Handlers"
             accesskey="P">previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/opscode_chef_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">About the Repository</a><ul>
<li><a class="reference internal" href="#directory-structure">Directory Structure</a><ul>
<li><a class="reference internal" href="#certificates">certificates/</a></li>
<li><a class="reference internal" href="#chef">.chef/</a></li>
<li><a class="reference internal" href="#config">config/</a><ul>
<li><a class="reference internal" href="#rake-rb">rake.rb</a></li>
<li><a class="reference internal" href="#knife-rb">knife.rb</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cookbooks">cookbooks/</a></li>
<li><a class="reference internal" href="#data-bags">data_bags/</a></li>
<li><a class="reference internal" href="#environments">environments/</a></li>
<li><a class="reference internal" href="#roles">roles/</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chefignore-files">chefignore Files</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#many-users-same-repo">Many Users, Same Repo</a></li>
<li><a class="reference internal" href="#create-the-repository">Create the Repository</a><ul>
<li><a class="reference internal" href="#clone">Clone</a></li>
<li><a class="reference internal" href="#download">Download</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="about-the-repository">
<h1>About the Repository<a class="headerlink" href="#about-the-repository" title="Permalink to this headline">¶</a></h1>
<p>The Chef repository is the location in which the following data objects are stored:</p>
<ul class="simple">
<li>Cookbooks (including recipes, versions, cookbook attributes, resources, providers, libraries, and templates)</li>
<li>Roles</li>
<li>Data bags</li>
<li>Environments</li>
<li>Configuration files (for clients, workstations, and servers)</li>
</ul>
<p>The Chef repository is located on a workstation and should be synchronized with a version control system, such as git. All of the data in the Chef repository should be treated like source code.</p>
<p>Knife is used to upload data to the Chef Server from the Chef repository. Once uploaded, that data is used by Chef to manage all of the nodes that are registered with the Chef Server and to ensure that the correct cookbooks, environments, roles, and other settings are applied to nodes correctly.</p>
<div class="section" id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h2>
<p>The chef-repo contains several directories, each with a README file that describes what it is for and how to use that directory when managing systems with Chef.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This document describes the default directory that is present in most Chef repositories.</p>
</div>
<p>The sub-directories in the Chef repository are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">certificates/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">.chef/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">config/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">cookbooks/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">data_bags/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">environments/</span></tt></li>
<li><tt class="docutils literal"><span class="pre">roles/</span></tt></li>
</ul>
<div class="section" id="certificates">
<h3>certificates/<a class="headerlink" href="#certificates" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">certificates/</span></tt> directory is used to store the SSL certificates that are generated by the Rake task <tt class="docutils literal"><span class="pre">ssl_cert</span></tt>. The values that are used in the SSL certificates can be modified in the config/rake.rb file.</p>
<p>To generate a certificate for a monitoring server:</p>
<ol class="arabic">
<li><p class="first">Run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>rake ssl_cert <span class="nv">FQDN</span><span class="o">=</span>monitoring.example.com
</pre></div>
</div>
</li>
<li><p class="first">Once the certificates are generated, copy them into each cookbook that will use them. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cp certificates/monitoring.example.com* cookbooks/COOKBOOK_NAME/files/default
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">COOKBOOK_NAME</span></tt> is the name of the cookbook that will use the certificate.</p>
</li>
<li><p class="first">And then in the recipe for each cookbook, create a <tt class="docutils literal"><span class="pre">cookbook_file</span></tt> resource to configure a resource that puts them in place on the destination server:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">cookbook_file</span> <span class="s1">&#39;/etc/apache2/ssl/monitoring.example.com.pem&#39;</span>
  <span class="nx">owner</span> <span class="s1">&#39;root&#39;</span>
  <span class="nx">group</span> <span class="s1">&#39;root&#39;</span>
  <span class="nx">mode</span> <span class="mi">0600</span>
<span class="nx">end</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="chef">
<h3>.chef/<a class="headerlink" href="#chef" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">.chef/</span></tt> directory is a hidden directory that is used to store .pem validation that are provided by the Chef Server and a knife.rb file. These files are required for interaction with a Chef Server.</p>
</div>
<div class="section" id="config">
<h3>config/<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">config/</span></tt> directory is used to store the <tt class="docutils literal"><span class="pre">rake.rb</span></tt> file, which is the configuration file for Rake. Rake is a Ruby application (and a third-party build management tool) that is used by Chef to help manage the installation of various components, including Chef itself, cookbooks, and so on.</p>
<p>The Chef repository uses two configuration files: <tt class="docutils literal"><span class="pre">rake.rb</span></tt> (required) and <tt class="docutils literal"><span class="pre">knife.rb</span></tt> (optional).</p>
<div class="section" id="rake-rb">
<h4>rake.rb<a class="headerlink" href="#rake-rb" title="Permalink to this headline">¶</a></h4>
<p>The rake.rb file is used to store the configuration details used by Rake, which is a third-party build management tool that is used by Chef to help manage the installation of various components. The config/rake.rb file is also used to generate SSL certificates based on the configuration settings for SSL certificates and the Rake task <tt class="docutils literal"><span class="pre">ssl_cert</span></tt>.</p>
<p>Rake includes tasks that are installed with the Chef libraries. To view the tasks that are available, run <tt class="docutils literal"><span class="pre">rake</span> <span class="pre">-T</span></tt>. For more information about Rake, see <a class="reference external" href="http://en.wikipedia.org/wiki/Rake_(software">http://en.wikipedia.org/wiki/Rake_(software</a>).</p>
<p>The following Rake commands are not replaced by Knife sub-commands:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">bundle_cookbook</span></tt></td>
<td>Creates cookbook tar.gz files in the pkgs/ directory.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">install</span></tt></td>
<td>Calls the following Rake commands: <tt class="docutils literal"><span class="pre">update</span></tt>, <tt class="docutils literal"><span class="pre">roles</span></tt>, and <tt class="docutils literal"><span class="pre">upload_cookbooks</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ssl_cert</span></tt></td>
<td>Creates self-signed SSL certificates in the <tt class="docutils literal"><span class="pre">certificates/</span></tt> directory.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">update</span></tt></td>
<td>Updates the repository from version control server; understands git and Subversion.</td>
</tr>
</tbody>
</table>
<p>The following Rake commands duplicate functionality in Chef and may be removed from future updates to the Chef libraries:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">metadata</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">metadata</span> <span class="pre">-a</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">new_cookbook</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">create</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">role</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">role</span> <span class="pre">from</span> <span class="pre">file</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">roles</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">role</span> <span class="pre">from</span> <span class="pre">file</span></tt>; iterates over roles and then uploads them.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">test_cookbooks</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">test</span> <span class="pre">-a</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">test_cookbook</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">test</span> <span class="pre">COOKBOOK_NAME</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">upload_cookbooks</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">upload</span> <span class="pre">-a</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">upload_cookbook</span></tt></td>
<td>Replaced by: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">upload</span> <span class="pre">COOKBOOK_NAME</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="knife-rb">
<h4>knife.rb<a class="headerlink" href="#knife-rb" title="Permalink to this headline">¶</a></h4>
<p>A knife.rb file is used to specify the repository-specific configuration details for Knife. This file is the default configuration file and is loaded every time this executable is run. The Knife executable cannot be run as a daemon. The configuration file is located at: ~/.chef/knife.rb. If a knife.rb file is present in the .chef/knife.rb directory in the Chef repository, the settings contained within that file will override the default configuration settings.</p>
</div>
</div>
<div class="section" id="cookbooks">
<h3>cookbooks/<a class="headerlink" href="#cookbooks" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">cookbooks/</span></tt> directory is used to store the cookbooks that are used by Chef when configuring the various systems in the organization. This directory contains the cookbooks that are used to configure systems in the infrastructure with Chef. Each cookbook can be configured to contain cookbook-specific copyright, email, and license data.</p>
</div>
<div class="section" id="data-bags">
<h3>data_bags/<a class="headerlink" href="#data-bags" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">data_bags/</span></tt> directory is used to store all of the data bags that exist for a Chef organization. Each sub-directory corresponds to a single data bag on the Chef Server and contains a JSON file for each data bag item. If a sub-directory does not exist, then create it using SSL commands. After a data bag item is created, it can then be uploaded to the Chef Server.</p>
</div>
<div class="section" id="environments">
<h3>environments/<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">environments/</span></tt> directory is used to store the files that define the environments that are available to the Chef Server. The environments files can be Ruby DSL files (.rb) or they can be JSON files (.json). Use Knife to install environment files to the Chef Server.</p>
</div>
<div class="section" id="roles">
<h3>roles/<a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">roles/</span></tt> directory is used to store the files that define the roles that are available to the Chef Server. The roles files can be Ruby DSL files (.rb) or they can be JSON files (.json). Use Knife to install role files to the Chef Server.</p>
</div>
</div>
<div class="section" id="chefignore-files">
<h2>chefignore Files<a class="headerlink" href="#chefignore-files" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">chefignore</span></tt> file is used to tell Knife which cookbook files in the Chef repository should be ignored when uploading data to the Chef Server. The type of data that should be ignored includes swap files, version control data, build output data, and so on. The <tt class="docutils literal"><span class="pre">chefignore</span></tt> file uses the <tt class="docutils literal"><span class="pre">File.fnmatch</span></tt> Ruby syntax to define the ignore patterns using <tt class="docutils literal"><span class="pre">*</span></tt>, <tt class="docutils literal"><span class="pre">**</span></tt>, and <tt class="docutils literal"><span class="pre">?</span></tt> wildcards.</p>
<ul class="simple">
<li>A pattern is relative to the cookbook root</li>
<li>A pattern may contain relative directory names</li>
<li>A pattern may match all files in a directory</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">chefignore</span></tt> file is located at the root of the <tt class="docutils literal"><span class="pre">/cookbooks</span></tt> subdirectory in the Chef repository. It should contain sections similar to the following:</p>
<div class="highlight-basemake"><pre># section
*ignore_pattern

# section
ignore_pattern*

# section
**ignore_pattern

# section
ignore_pattern**

# section
?ignore_pattern

# section
ignore_pattern?</pre>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>The following examples show how to add entries to the <tt class="docutils literal"><span class="pre">chefignore</span></tt> file.</p>
<p><strong>Ignore editor swap files</strong></p>
<p>Many text editors leave files behind. To prevent these files from being uploaded to the Chef Server, add an entry to the <tt class="docutils literal"><span class="pre">chefignore</span></tt> file. For Emacs, do something like:</p>
<div class="highlight-basemake"><pre>*~</pre>
</div>
<p>and for vim, do something like:</p>
<div class="highlight-basemake"><pre>*.sw[a-z]</pre>
</div>
<p><strong>Ignore top-level Subversion data</strong></p>
<p>If Subversion is being used as the version source control application, it is important not to upload certain files that Subversion uses to maintain the version history of each file. This is because Chef will never use it while configuring nodes, plus the amount of data in an upload that includes top-level Subversion data could be significant.</p>
<p>To prevent the upload of top-level Subversion data, add something like the following to the <tt class="docutils literal"><span class="pre">chefignore</span></tt> file:</p>
<div class="highlight-basemake"><pre>*/.svn/*</pre>
</div>
<p>To verify that the top-level Subversion data is not being uploaded to the Chef Server, use Knife and run a command similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife cookbook show name_of_cookbook cookbook_version | grep .svn
</pre></div>
</div>
<p><strong>Ignore all files in a directory</strong></p>
<p>The <tt class="docutils literal"><span class="pre">chefignore</span></tt> file can be used to ignore all of the files in a directory. For example:</p>
<div class="highlight-basemake"><pre>files/default/subdirectory/*</pre>
</div>
<p>or:</p>
<div class="highlight-basemake"><pre>files/default/subdirectory/**</pre>
</div>
</div>
</div>
<div class="section" id="many-users-same-repo">
<h2>Many Users, Same Repo<a class="headerlink" href="#many-users-same-repo" title="Permalink to this headline">¶</a></h2>
<p>It is possible for multiple users to access the Chef Server using the same knife.rb file. (A user can even access multiple organizations if, for example, each Chef repository contained the same copy of the knife.rb file.) This can be done by adding the knife.rb file to the Chef repository, and then using environment variables to handle the user-specific credential details and/or sensitive values. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">current_dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span>
  <span class="n">user</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;OPSCODE_USER&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;USER&#39;</span><span class="o">]</span>
  <span class="n">node_name</span>                <span class="n">user</span>
  <span class="n">client_key</span>               <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/.chef/</span><span class="si">#{</span><span class="n">user</span><span class="si">}</span><span class="s2">.pem&quot;</span>
  <span class="n">validation_client_name</span>   <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ORGNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">-validator&quot;</span>
  <span class="n">validation_key</span>           <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/.chef/</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ORGNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">-validator.pem&quot;</span>
  <span class="n">chef_server_url</span>          <span class="s2">&quot;https://api.opscode.com/organizations/</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ORGNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="n">cache_type</span>               <span class="s1">&#39;BasicFile&#39;</span>
  <span class="n">cache_options</span><span class="p">(</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/.chef/checksums&quot;</span> <span class="p">)</span>
  <span class="n">cookbook_path</span>            <span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/../cookbooks&quot;</span><span class="o">]</span>
  <span class="n">cookbook_copyright</span> <span class="s2">&quot;Your Company, Inc.&quot;</span>
  <span class="n">cookbook_license</span> <span class="s2">&quot;apachev2&quot;</span>
  <span class="n">cookbook_email</span> <span class="s2">&quot;cookbooks@yourcompany.com&quot;</span>

  <span class="c1"># all your credentials are belong to us</span>

  <span class="c1"># Amazon AWS</span>
  <span class="n">knife</span><span class="o">[</span><span class="ss">:aws_access_key_id</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="n">knife</span><span class="o">[</span><span class="ss">:aws_secret_access_key</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>

  <span class="c1"># Rackspace Cloud</span>
  <span class="n">knife</span><span class="o">[</span><span class="ss">:rackspace_api_username</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;RACKSPACE_USERNAME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="n">knife</span><span class="o">[</span><span class="ss">:rackspace_api_key</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;RACKSPACE_API_KEY&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-repository">
<h2>Create the Repository<a class="headerlink" href="#create-the-repository" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to create a Chef repository when using the Opscode boilerplate repository as a base:</p>
<ul class="simple">
<li>Clone the Opscode repository for Chef from github</li>
<li>Download the Opscode repository as a tar.gz file and place it into local version source control.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Opscode strongly recommends using some type of version control tool to manage the source code in the Chef repository. Opscode uses git for everything, including for cookbooks. If another version source control system is preferred over git (such as Subversion, Mercurial, or Bazaar) that is just fine.</p>
</div>
<div class="section" id="clone">
<h3>Clone<a class="headerlink" href="#clone" title="Permalink to this headline">¶</a></h3>
<p>The Chef repository is available on github: <a class="reference external" href="https://github.com/opscode/chef-repo">https://github.com/opscode/chef-repo</a>.</p>
<p>To clone the Chef repository from github:</p>
<ol class="arabic">
<li><p class="first">Download and install git.</p>
</li>
<li><p class="first">Run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone git://github.com/opscode/chef-repo.git
</pre></div>
</div>
</li>
<li><p class="first">(Optional) After the repository is cloned, the history of that repository can be wiped out by removing the &#8221;.git&#8221; directory, which allows the initialization of a new repository or to move the Chef repository into another version source control system, such as Subversion, Mercurial, or Bazaar.</p>
</li>
</ol>
</div>
<div class="section" id="download">
<h3>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<p>Instead of cloning the Chef repository from github, a tar.gz file can be downloaded from github directly (<a class="reference external" href="http://github.com/opscode/chef-repo/tarball/master">http://github.com/opscode/chef-repo/tarball/master</a>) or through the command shell using GNU Wget (or a similar application).</p>
<p>To download the Chef repository:</p>
<ol class="arabic">
<li><p class="first">Run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>wget http://github.com/opscode/chef-repo/tarball/master
</pre></div>
</div>
</li>
<li><p class="first">Extract the tar.gz file into a directory. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tar -zxf master
</pre></div>
</div>
</li>
<li><p class="first">Move the extracted file to the Chef repository. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mv opscode-chef-repo-a3bec38 chef-repo
</pre></div>
</div>
</li>
</ol>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="essentials_repository_structure.html" title="Directory Structure"
             >next</a></li>
        <li class="right" >
          <a href="essentials_handlers.html" title="About Exception and Report Handlers"
             >previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>
 
      </ul>
    </div>

    <div class="footer">
    This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>


    <div class="footer">
        &copy; Copyright This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_setAccount', 'UA-6369228-7']);
_gaq.push(['_setDomainName', '.opscode.com']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_addIgnoredRef','opscode.com']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Async HubSpot Analytics Code -->
<script type="text/javascript">
(function(d,s,i,r) {
            if (d.getElementById(i)){return;}
            var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
            n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/57718.js';
            e.parentNode.insertBefore(n, e);
        })(document,"script","hs-analytics",300000);
    </script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Contact Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Contact Analytics Code -->


  </body>
</html>