

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>aws Lightweight Resource &mdash; Chef Docs</title>
    
    <link rel="stylesheet" href="_static/opscode.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/opscode.ico"/>
    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="up" title="About LWRPs" href="lwrp.html" />
    <link rel="next" title="bluepill Lightweight Resource" href="lwrp_bluepill.html" />
    <link rel="prev" title="apt Lightweight Resource" href="lwrp_apt.html" /> 
  </head>
  <body>
<div style="background-color: #212c35; text-align: left; padding: 0px 0px 0px 0px">
<a href="http://docs.opscode.com/"><img src="_static/opscode_html_logo.png" border="0" alt="Opscode"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="lwrp_bluepill.html" title="bluepill Lightweight Resource"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="lwrp_apt.html" title="apt Lightweight Resource"
             accesskey="P">previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="lwrp.html" accesskey="U">About LWRPs</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/opscode_chef_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">aws Lightweight Resource</a><ul>
<li><a class="reference internal" href="#amazon-aws-credentials">Amazon Web Services Credentials</a></li>
<li><a class="reference internal" href="#aws-ebs-volume">aws_ebs_volume</a><ul>
<li><a class="reference internal" href="#actions">Actions</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#aws-elastic-ip">aws_elastic_ip</a><ul>
<li><a class="reference internal" href="#id1">Actions</a></li>
<li><a class="reference internal" href="#id2">Attributes</a></li>
<li><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aws-elastic-lb">aws_elastic_lb</a><ul>
<li><a class="reference internal" href="#id4">Actions</a></li>
<li><a class="reference internal" href="#id5">Attributes</a></li>
<li><a class="reference internal" href="#id6">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#aws-resource-tag">aws_resource_tag</a><ul>
<li><a class="reference internal" href="#id7">Actions</a></li>
<li><a class="reference internal" href="#id8">Attributes</a></li>
<li><a class="reference internal" href="#id9">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="aws-lightweight-resource">
<h1>aws Lightweight Resource<a class="headerlink" href="#aws-lightweight-resource" title="Permalink to this headline">¶</a></h1>
<p>The <strong>aws</strong> cookbook is used to manage resources that are running in Amazon Web Services.</p>
<p>The <strong>aws</strong> cookbook contains the following lightweight resources: <tt class="docutils literal"><span class="pre">aws_ebs_volume</span></tt>, <tt class="docutils literal"><span class="pre">aws_elastic_ip</span></tt>, <tt class="docutils literal"><span class="pre">aws_elastic_lb</span></tt>, and <tt class="docutils literal"><span class="pre">aws_resource_tag</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These lightweight resources are part of the <strong>aws</strong> cookbook (<a class="reference external" href="http://community.opscode.com/cookbooks/aws">http://community.opscode.com/cookbooks/aws</a>), which provides libraries, resources, and providers that can be used to configure and manage Amazon Web Services components using the Amazon EC2 API.</p>
</div>
<div class="section" id="amazon-aws-credentials">
<h2>Amazon Web Services Credentials<a class="headerlink" href="#amazon-aws-credentials" title="Permalink to this headline">¶</a></h2>
<p>This lightweight resource requires that Amazon Web Services credentials be passed using the <tt class="docutils literal"><span class="pre">aws_access_key</span></tt> and <tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt> attributes. It is recommended that these be stored as a data bag item. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="p">{</span>
   <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
   <span class="s2">&quot;aws_access_key_id&quot;</span><span class="p">:</span> <span class="s2">&quot;YOUR AWS ACCESS KEY&quot;</span><span class="p">,</span>
   <span class="s2">&quot;aws_secret_access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;YOUR AWS SECRET ACCESS KEY&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These values can be loaded in a recipe by using something like the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">aws</span> <span class="o">=</span> data_bag_item<span class="o">(</span><span class="s2">&quot;aws&quot;</span>, <span class="s2">&quot;main&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>and then the elements of the data bag item can be accessed as hash keys in the Amazon Web Services hash. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre>aws<span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
aws<span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="aws-ebs-volume">
<h2>aws_ebs_volume<a class="headerlink" href="#aws-ebs-volume" title="Permalink to this headline">¶</a></h2>
<p>The <strong>aws_ebs_volume</strong> lightweight resource is used to handle manipulations of Amazon Elastic Block Store volumes. This lightweight resource does not create file systems, mount points, or other storage management tasks. This lightweight resource used the <tt class="docutils literal"><span class="pre">right_aws</span></tt> Ruby gem to access the Amazon EC2 API.</p>
<div class="section" id="actions">
<h3>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following actions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Action</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:create</span></tt></td>
<td>Use to create a new Amazon Elastic Block Store volume. This action will only make the API call to create a new volume, which will get a random volume identifier that is generated by Amazon EC2. This identifier can be attached in the same resource by specifying the actions as an array.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:attach</span></tt></td>
<td>Use to attach an existing volume to a node.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:detach</span></tt></td>
<td>Use to detach the specified volume from a node.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:snapshot</span></tt></td>
<td>Use to create a snapshot of the volume.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:prune</span></tt></td>
<td>Use to prune older snapshots from a node.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">availability_zone</span></tt></td>
<td>The name of the availability zone. Each availability zone is unique within a region.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">aws_access_key</span></tt></td>
<td>The user name for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt></td>
<td>The password for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">device</span></tt></td>
<td>The local block device to be attached to an Amazon Elastic Block Store volume.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">size</span></tt></td>
<td>The size of the volume (in gigabytes).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">snapshot_id</span></tt></td>
<td>The identifier used to build an Amazon Elastic Block Store volume snapshot.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">snapshots_to_keep</span></tt></td>
<td>The number of snapshots to maintain. This attribute is available only when the <tt class="docutils literal"><span class="pre">:prune</span></tt> action is used. Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">timeout</span></tt></td>
<td>The connection timeout for the Amazon EC2 API. Default value: <tt class="docutils literal"><span class="pre">3</span> <span class="pre">minutes</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">volume_id</span></tt></td>
<td>The identifier for an Amazon Elastic Block Store volume.</td>
</tr>
</tbody>
</table>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p>To create a volume and attach it to a node</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_ebs_volume</span> <span class="s2">&quot;database_volume&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">size</span> <span class="mi">50</span>
  <span class="n">device</span> <span class="s2">&quot;/dev/sdm&quot;</span>
  <span class="n">action</span> <span class="o">[</span><span class="ss">:create</span><span class="p">,</span> <span class="ss">:attach</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p>To create a volume based on an existing volume snapshot</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_ebs_volume</span> <span class="s2">&quot;db_ebs_volume_from_snapshot&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">size</span> <span class="mi">50</span>
  <span class="n">device</span> <span class="s2">&quot;/dev/sdi&quot;</span>
  <span class="n">snapshot_id</span> <span class="s2">&quot;snap-ABCDEFGH&quot;</span> <span class="c1"># creates a new volume based on this snapshot</span>
  <span class="n">action</span> <span class="o">[</span> <span class="ss">:create</span><span class="p">,</span> <span class="ss">:attach</span> <span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p>To prune all snapshots (except for one)</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_ebs_volume</span> <span class="s2">&quot;prune_snapshots&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">volume_id</span> <span class="s2">&quot;vol-ABCDEF12&quot;</span> <span class="c1"># must specify the volume ID to prune</span>
  <span class="n">snapshots_to_keep</span> <span class="mi">1</span>
  <span class="n">action</span> <span class="ss">:prune</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="aws-elastic-ip">
<h2>aws_elastic_ip<a class="headerlink" href="#aws-elastic-ip" title="Permalink to this headline">¶</a></h2>
<p>The <strong>aws_elastic_ip</strong> lightweight resource is used to associate or disassociate elastic IP addresses used within Amazon EC2. New elastic IP address must be added manually to the Amazon EC2 account. When an elastic IP address is associated with a node, network connectivity may be lost. This lightweight resource used the <tt class="docutils literal"><span class="pre">right_aws</span></tt> Ruby gem to access the Amazon EC2 API.</p>
<div class="section" id="id1">
<h3>Actions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following actions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Action</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:associate</span></tt></td>
<td>Use to associate the specified IP address with a node.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:disassociate</span></tt></td>
<td>Use to disassociate the specified IP address from a node.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Attributes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aws_access_key</span></tt></td>
<td>The user name for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt></td>
<td>The password for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ip</span></tt></td>
<td>The IP address for the node.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">timeout</span></tt></td>
<td>The connection timeout for the Amazon EC2 API. Default value: <tt class="docutils literal"><span class="pre">3</span> <span class="pre">minutes</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Example: Assocating a new IP address The IP below is not valid in Amazon EC2, and is used just as an example.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_elastic_ip</span> <span class="s2">&quot;eip_load_balancer_production&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">ip</span> <span class="s2">&quot;192.168.1.42&quot;</span>
  <span class="n">action</span> <span class="ss">:associate</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Example: Disassociating a new IP address The IP below is not valid in Amazon EC2, and is used just as an example.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_elastic_ip</span> <span class="s2">&quot;eip_load_balancer_production&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">ip</span> <span class="s2">&quot;192.168.1.42&quot;</span>
  <span class="n">action</span> <span class="ss">:disassociate</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="aws-elastic-lb">
<h2>aws_elastic_lb<a class="headerlink" href="#aws-elastic-lb" title="Permalink to this headline">¶</a></h2>
<p>The <strong>aws_elastic_lb</strong> lightweight resource is used to associate or disassociate elastic load balancers used within Amazon EC2. New load balancers must be added to the availability zone for the instance prior to use.</p>
<div class="section" id="id4">
<h3>Actions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following actions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Action</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:deregister</span></tt></td>
<td>Use to remove an instance from a load balancer.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:register</span></tt></td>
<td>Use to add an instance to a load balancer.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h3>Attributes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aws_access_key</span></tt></td>
<td>The user name for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt></td>
<td>The password for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">name</span></tt></td>
<td>Required. The name of the load balancer.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h3>Examples<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>To add a load balancer to an availability zone:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_elastic_lb</span> <span class="s2">&quot;elb_qa&quot;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="nb">name</span> <span class="s2">&quot;QA&quot;</span> <span class="n">action</span> <span class="ss">:register</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="aws-resource-tag">
<h2>aws_resource_tag<a class="headerlink" href="#aws-resource-tag" title="Permalink to this headline">¶</a></h2>
<p>The <strong>aws_resource_tag</strong> is used to manage the tags that are associated with one (or more) resources in Amazon Web Services, such as Amazon EC2 intances or Amazon Elastic Block Store volumes and volume snapshots.</p>
<div class="section" id="id7">
<h3>Actions<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following actions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Action</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:add</span></tt></td>
<td>Use to add a tag to a resource.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:force_remove</span></tt></td>
<td>Use to remove all tags from a resource.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:remove</span></tt></td>
<td>Use to remove a tag from a resource that matches one (or more) tags.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:update</span></tt></td>
<td>Default. Use to modify a tag already assigned to a resource.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h3>Attributes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>This lightweight resource provider has the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">aws_access_key</span></tt></td>
<td>The user name for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt></td>
<td>The password for the secret access key for the API endpoint used with Amazon EC2.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">resource_id</span></tt></td>
<td>One or more resources whose tags will be modified. This value may be a single ID as a string or multiple IDs as an array. If this value is not specified, then the <tt class="docutils literal"><span class="pre">name</span></tt> attribute for each resource will be used.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">tags</span></tt></td>
<td>Required. A hash of key value pairs that are used as resource tags. For example: <tt class="docutils literal"><span class="pre">{</span> <span class="pre">&quot;Name&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;foo&quot;,</span> <span class="pre">&quot;Environment&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;node.chef_environment&quot;</span> <span class="pre">}</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h3>Examples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>To assign tags to a node to reflect it&#8217;s role and environment:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_resource_tag</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;ec2&#39;</span><span class="o">][</span><span class="s1">&#39;instance_id&#39;</span><span class="o">]</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">tags</span><span class="p">({</span><span class="s2">&quot;Name&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;www.example.com app server&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Environment&quot;</span> <span class="o">=&gt;</span> <span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span><span class="p">})</span>
  <span class="n">action</span> <span class="ss">:update</span>
<span class="k">end</span>
</pre></div>
</div>
<p>To assign a set of tags to multiple resources, for example more than one Amazon Elastic Block Store volume in a disk set:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">aws_resource_tag</span> <span class="s1">&#39;my awesome raid set&#39;</span> <span class="k">do</span>
  <span class="n">aws_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_access_key_id&#39;</span><span class="o">]</span>
  <span class="n">aws_secret_access_key</span> <span class="n">aws</span><span class="o">[</span><span class="s1">&#39;aws_secret_access_key&#39;</span><span class="o">]</span>
  <span class="n">resource_id</span> <span class="o">[</span> <span class="s2">&quot;vol-d0518cb2&quot;</span><span class="p">,</span> <span class="s2">&quot;vol-fad31a9a&quot;</span><span class="p">,</span> <span class="s2">&quot;vol-fb106a9f&quot;</span><span class="p">,</span> <span class="s2">&quot;vol-74ed3b14&quot;</span> <span class="o">]</span>
    <span class="n">tags</span><span class="p">({</span><span class="s2">&quot;Name&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;My awesome RAID disk set&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Environment&quot;</span> <span class="o">=&gt;</span> <span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span><span class="p">})</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="lwrp_bluepill.html" title="bluepill Lightweight Resource"
             >next</a></li>
        <li class="right" >
          <a href="lwrp_apt.html" title="apt Lightweight Resource"
             >previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="lwrp.html" >About LWRPs</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
    This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>


    <div class="footer">
        &copy; Copyright This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_setAccount', 'UA-6369228-7']);
_gaq.push(['_setDomainName', '.opscode.com']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_addIgnoredRef','opscode.com']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Async HubSpot Analytics Code -->
<script type="text/javascript">
(function(d,s,i,r) {
            if (d.getElementById(i)){return;}
            var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
            n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/57718.js';
            e.parentNode.insertBefore(n, e);
        })(document,"script","hs-analytics",300000);
    </script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Contact Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Contact Analytics Code -->


  </body>
</html>