

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Bootstrap a Node &mdash; Chef Docs</title>
    
    <link rel="stylesheet" href="_static/opscode.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1-1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/opscode.ico"/>
    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="up" title="Install Chef" href="install.html" />
    <link rel="next" title="Install Chef Server 11.x" href="install_server.html" />
    <link rel="prev" title="Install Chef 11.x on a Workstation" href="install_workstation.html" /> 
  </head>
  <body>
<div style="background-color: #212c35; text-align: left; padding: 0px 0px 0px 0px">
<a href="http://docs.opscode.com/"><img src="_static/opscode_html_logo.png" border="0" alt="Opscode"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="install_server.html" title="Install Chef Server 11.x"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="install_workstation.html" title="Install Chef 11.x on a Workstation"
             accesskey="P">previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="install.html" accesskey="U">Install Chef</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/opscode_chef_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Bootstrap a Node</a><ul>
<li><a class="reference internal" href="#steps">Steps</a><ul>
<li><a class="reference internal" href="#identify-the-fqdn-or-ip-address">Identify the FQDN or IP Address</a></li>
<li><a class="reference internal" href="#run-the-knife-bootstrap-command">Run the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command</a></li>
<li><a class="reference internal" href="#verify-the-node">Verify the node</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="bootstrap-a-node">
<h1>Bootstrap a Node<a class="headerlink" href="#bootstrap-a-node" title="Permalink to this headline">¶</a></h1>
<p>The Chef Server acts as a hub for configuration data. The Chef Server stores cookbooks, the policies that are applied to cookbooks, and metadata that describes each registered node in the infrastructure. Nodes use the chef-client to ask the Chef Server for configuration details, such as recipes, templates, and file distributions. The chef-client then does as much of the configuration work as possible on the nodes themselves (and not on the Chef Server). This scalable approach distributes the configuration effort throughout the organization.</p>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<p>The following steps describe how to bootstrap a node.</p>
<ol class="arabic simple">
<li>Identify the FQDN or IP address for the node</li>
<li>Run the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command</li>
<li>Verify the node on the Chef Server</li>
</ol>
<p>See the following sections for more information about each step.</p>
<div class="section" id="identify-the-fqdn-or-ip-address">
<h3>Identify the FQDN or IP Address<a class="headerlink" href="#identify-the-fqdn-or-ip-address" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command requires the FQDN or the IP address for the node in order to complete the bootstrap operation.</p>
</div>
<div class="section" id="run-the-knife-bootstrap-command">
<h3>Run the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command<a class="headerlink" href="#run-the-knife-bootstrap-command" title="Permalink to this headline">¶</a></h3>
<p>Once the workstation is configured, it can be used to install Chef on one (or more) nodes across the organization using a Knife bootstrap operation. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command is used to SSH into the target machine, and then do what is needed to allow the chef-client to run on the node. It will install the chef-client executable (if necessary), generate keys, and register the node with the Chef Server. The bootstrap operation requires the IP address or FQDN of the target system, the SSH credentials (username, password or identity file) for an account that has root access to the node, and (if the operating system is not Ubuntu, which is the default distribution used by <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt>) the operating system running on the target system.</p>
<p>To install Chef on a node using <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt>:</p>
<ol class="arabic">
<li><p class="first">In a command window, enter the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife bootstrap 123.45.6.789 -x username -P password --sudo
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">123.45.6.789</span></tt> is the IP address or the FQDN for the node.</p>
</li>
<li><p class="first">While the bootstrap operation is running, the command window will show something like the following:</p>
<div class="highlight-bash"><div class="highlight"><pre>Bootstrapping Chef on 123.45.6.789
123.45.6.789 knife sudo password:
Enter your password:
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:05 -0700<span class="o">]</span> INFO: *** Chef 10.12.0 ***
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:07 -0700<span class="o">]</span> INFO: Client key /etc/chef/client.pem is not present - registering
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Setting the run_list to <span class="o">[]</span> from JSON
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Run List is <span class="o">[]</span>
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Run List expands to <span class="o">[]</span>
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Starting Chef Run <span class="k">for </span>name_of_node
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Running start handlers
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:15 -0700<span class="o">]</span> INFO: Start handlers complete.
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:17 -0700<span class="o">]</span> INFO: Loading cookbooks <span class="o">[]</span>
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:17 -0700<span class="o">]</span> WARN: Node name_of_node has an empty run list.
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:19 -0700<span class="o">]</span> INFO: Chef Run <span class="nb">complete </span>in 3.986283452 seconds
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:19 -0700<span class="o">]</span> INFO: Running report handlers
123.45.6.789
123.45.6.789 <span class="o">[</span>Fri, 07 Sep 2012 11:05:19 -0700<span class="o">]</span> INFO: Report handlers <span class="nb">complete</span>
123.45.6.789
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="verify-the-node">
<h3>Verify the node<a class="headerlink" href="#verify-the-node" title="Permalink to this headline">¶</a></h3>
<p>Optional. After a bootstrap operation has finished, verify that the node is recognized by the Chef Server. Use one of the following Knife subcommands:</p>
<ol class="arabic">
<li><p class="first">To show only the node that was just bootstrapped, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>knife client show name_of_node
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">name_of_node</span></tt> is the name of the node that was just bootstrapped. The Chef Server will return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre>admin:       <span class="nb">false</span>
chef_type:   client
json_class:  Chef::ApiClient
name:        name_of_node
public_key:
</pre></div>
</div>
</li>
<li><p class="first">To show the full list of nodes (and workstations) that are registered with the Chef Server, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre>knife client list
</pre></div>
</div>
<p>The Chef Server will return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre>workstation
workstation
...
client
name_of_node
...
client
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="install_server.html" title="Install Chef Server 11.x"
             >next</a></li>
        <li class="right" >
          <a href="install_workstation.html" title="Install Chef 11.x on a Workstation"
             >previous</a> |</li>
        <li><a href="http://docs.opscode.com/chef/knife.html" target="_products">Knife</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/resources.html" target="_products">Resources</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/dsl_recipe.html" target="_products">Recipe DSL</a>&#149;</li>
        <li><a href="http://docs.opscode.com/chef/lwrps_custom.html" target="_products">LWRPs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/search.html">Search the Docs</a>&#149;</li>
        <li><a href="http://docs.opscode.com/">Home</a> &raquo;</li>

          <li><a href="install.html" >Install Chef</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
    This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>


    <div class="footer">
        &copy; Copyright This work is licensed under a Creative Commons Attribution 3.0 Unported License.
    </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_setAccount', 'UA-6369228-7']);
_gaq.push(['_setDomainName', '.opscode.com']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_addIgnoredRef','opscode.com']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s); })();
</script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Async HubSpot Analytics Code -->
<script type="text/javascript">
(function(d,s,i,r) {
            if (d.getElementById(i)){return;}
            var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
            n.id=i;n.src='//js.hubspot.com/analytics/'+(Math.ceil(new Date()/r)*r)+'/57718.js';
            e.parentNode.insertBefore(n, e);
        })(document,"script","hs-analytics",300000);
    </script>
<!-- End of Async HubSpot Analytics Code -->

<!-- Start of Contact Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Contact Analytics Code -->


  </body>
</html>